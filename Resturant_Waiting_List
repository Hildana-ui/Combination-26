class Node:
    def __init__(self, name):
        self.name = name
        self.prev = None
        self.next = None


class WaitingList:
    def __init__(self):
        self.head = None
        self.tail = None
        self.map = {}  

    
    def arrive(self, name):
        new_node = Node(name)
        self.map[name] = new_node

        if self.head is None:
            self.head = self.tail = new_node
        else:
            self.tail.next = new_node
            new_node.prev = self.tail
            self.tail = new_node

    
    def arrive_vip(self, name):
        new_node = Node(name)
        self.map[name] = new_node

        if self.head is None:
            self.head = self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node


    def leave(self, name):
        if name not in self.map:
            print(f"{name} not found in line.")
            return

        node = self.map.pop(name)

        if node.prev:
            node.prev.next = node.next
        else:
            self.head = node.next

        if node.next:
            node.next.prev = node.prev
        else:
            self.tail = node.prev


    def seat(self):
        if not self.head:
            print("No one to seat.")
            return

        person = self.head
        print(f"Seating {person.name}.")
        self.leave(person.name)

    
    def show_line(self):
        if not self.head:
            print("Line is empty.")
            return

        current = self.head
        line = []
        while current:
            line.append(current.name)
            current = current.next

        print("Line: " + " -> ".join(line))

if __name__ == "__main__":
    line = WaitingList()

    print("VIP Restaurant Manager CLI")
    print("Commands: ARRIVE <name>, ARRIVE_VIP <name>, LEAVE <name>, SEAT, SHOW_LINE, EXIT")

    while True:
        command = input("> ").strip()
        if not command:
            continue

        if command.upper() == "EXIT":
            break

        parts = command.split()
        cmd = parts[0].upper()

        if cmd == "ARRIVE" and len(parts) == 2:
            line.arrive(parts[1])

        elif cmd == "ARRIVE_VIP" and len(parts) == 2:
            line.arrive_vip(parts[1])

        elif cmd == "LEAVE" and len(parts) == 2:
            line.leave(parts[1])

        elif cmd == "SEAT":
            line.seat()

        elif cmd == "SHOW_LINE":
            line.show_line()

        else:
            print("Invalid command.")
